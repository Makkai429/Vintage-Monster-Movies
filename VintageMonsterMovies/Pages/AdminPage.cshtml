@page
@model VintageMonsterMovies.Pages.AdminPageModel
@{
}
<link rel="stylesheet" href="~/css/horror.css" asp-append-version="true" />

<h3>Add a Movie</h3>
<a asp-page="Login" class="text-danger">Back</a>
<form method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div>
        <label asp-for="movie.title">Title</label>
        <input asp-for="movie.title" />
        <span asp-validation-for="movie.title" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="movie.publishingYear">Publishing Year</label>
        <input asp-for="movie.publishingYear" />
        <span asp-validation-for="movie.publishingYear" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="movie.description">Description</label>
        <textarea asp-for="movie.description"></textarea>
        <span asp-validation-for="movie.description" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="movie.writer">Writer</label>
        <input asp-for="movie.writer" />
        <span asp-validation-for="movie.writer" class="text-danger"></span>
    </div>

    <div>
        <label asp-for="movie.director">Director</label>
        <input asp-for="movie.director" />
        <span asp-validation-for="movie.director" class="text-danger"></span>
    </div>

    <button type="submit">Save</button>
</form>

<a asp-page="CreateDetails" class="horror-link">Add details</a>

<h3>Movies</h3>
<table>
    <thead>
        <tr>
            <th>Title</th>
            <th>Publishing Year</th>
            <th>Writer</th>
            <th>Director</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var m in Model.movieList)
        {
            <tr>
                <td>@m.title</td>
                <td>@m.publishingYear</td>
                <td>@m.writer</td>
                <td>@m.director</td>
                <td>
                    <a asp-page="Edit" asp-route-id="@m.id" class="horror-link">Edit</a>
                </td>
                <td>
                    <form method="post" asp-page-handler="Delete" class="d-inline">
                        <input type="hidden" name="id" value="@m.id" />
                        <button type="submit"
                                onclick="return confirm('Do you want to delete this movie? @m.title');">Delete</button>
                    </form>
                </td>
            </tr>

            @if (!string.IsNullOrWhiteSpace(m.description))
            {
                <tr>
                    <td colspan="4" class="text-muted" style="white-space: pre-line;">
                        @m.description
                    </td>
                </tr>
            }

        }
    </tbody>
</table>

